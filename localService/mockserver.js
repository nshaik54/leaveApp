/*
 * Copyright (C) 2009-2017 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/core/util/MockServer","hcm/fab/lib/common/util/MockServerUtil"],function(M,a){"use strict";var m,_="hcm/fab/myleaverequest/",b=_+"localService/mockdata";return{init:function(){var u=jQuery.sap.getUriParameters(),j=jQuery.sap.getModulePath(b),s=jQuery.sap.getModulePath(_+"manifest",".json"),e="UserlistSet",E=u.get("errorType"),i=E==="badRequest"?400:500,o=jQuery.sap.syncGetJSON(s).data,c=o["sap.app"].dataSources.leaveService,d=jQuery.sap.getModulePath(_+c.settings.localUri.replace(".xml",""),".xml"),f=/.*\/$/.test(c.uri)?c.uri:c.uri+"/";m=new M({rootUri:f});M.config({autoRespond:true,autoRespondAfter:(u.get("serverDelay")||10)});m.simulate(d,{sMockdataBaseUrl:j,bGenerateMissingMockData:true});a.startCommonLibraryMockServer();var r=m.getRequests(),R=function(g,h,k){k.response=function(x){x.respond(g,{"Content-Type":"text/plain;charset=utf-8"},h);};};if(u.get("metadataError")){r.forEach(function(g){if(g.path.toString().indexOf("$metadata")>-1){R(500,"metadata Error",g);}});}if(E){r.forEach(function(g){if(g.path.toString().indexOf(e)>-1){R(i,E,g);}});}m.start();jQuery.sap.log.info("Running the app with mock data");},getMockServer:function(){return m;}};});
