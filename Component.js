/*
 * Copyright (C) 2009-2017 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/core/routing/HashChanger","hcm/fab/lib/common/util/CommonModelManager","sap/ui/Device","sap/ui/model/json/JSONModel","hcm/fab/myleaverequest/model/models","hcm/fab/myleaverequest/controller/ErrorHandler"],function(U,H,C,D,J,m,E){"use strict";return U.extend("hcm.fab.myleaverequest.Component",{metadata:{manifest:"json"},oMessageProcessor:null,oMessageManager:null,sEmployeeId:undefined,init:function(){U.prototype.init.apply(this,arguments);this.oMessageProcessor=new sap.ui.core.message.ControlMessageProcessor();this.oMessageManager=sap.ui.getCore().getMessageManager();this.oMessageManager.registerMessageProcessor(this.oMessageProcessor);this._oErrorHandler=new E(this,this.oMessageProcessor,this.oMessageManager);this.setModel(m.createDeviceModel(),"device");this.setModel(this.oMessageManager.getMessageModel(),"message");this.getRouter().initialize();var s=this.getStartupParameters();if(s.action&&!this.hasInnerAppRoute()){this.navigateToView(s);}},hasInnerAppRoute:function(){var u=sap.ushell.Container.getService("URLParsing");var h=H.prototype.getHash();var p=u.parseShellHash(h);return typeof p.appSpecificRoute==="string"&&p.appSpecificRoute.length>0;},navigateToView:function(s){var a=s.action;var A={"create":"creationWithParams"};if(!A[a]){return;}var t=A[a];var b=this;b.getRouter().navTo(t,{absenceType:s.absenceType||"default",dateFrom:s.dateFrom||0,dateTo:s.dateTo||0});},getStartupParameters:function(){var a=this.getComponentData().startupParameters;var s={};Object.keys(a).forEach(function(p){s[p]=a[p][0];});return s;},destroy:function(){this.getErrorHandler().destroy();U.prototype.destroy.apply(this,arguments);},getContentDensityClass:function(){if(this._sContentDensityClass===undefined){if(jQuery(document.body).hasClass("sapUiSizeCozy")||jQuery(document.body).hasClass("sapUiSizeCompact")){this._sContentDensityClass="";}else if(!D.support.touch){this._sContentDensityClass="sapUiSizeCompact";}else{this._sContentDensityClass="sapUiSizeCozy";}}return this._sContentDensityClass;},getErrorHandler:function(){return this._oErrorHandler;},getAssignmentId:function(){if(!this.sEmployeeId){return C.getDefaultAssignment().then(function(d){this.sEmployeeId=d.EmployeeId;return this.sEmployeeId;}.bind(this));}else{return Promise.resolve(this.sEmployeeId);}},setAssignmentId:function(e){this.sEmployeeId=e;}});});
